{"version":3,"sources":["BottomSheet.tsx"],"names":["Animated","addWhitelistedUIProps","decelerationRate","BottomSheetComponent","props","ref","animationDuration","_providedAnimationDuration","DEFAULT_ANIMATION_DURATION","animationEasing","_providedAnimationEasing","DEFAULT_ANIMATION_EASING","animationConfigs","_providedAnimationConfigs","index","_providedIndex","snapPoints","_providedSnapPoints","animateOnMount","DEFAULT_ANIMATE_ON_MOUNT","enableContentPanningGesture","DEFAULT_ENABLE_CONTENT_PANNING_GESTURE","enableHandlePanningGesture","DEFAULT_ENABLE_HANDLE_PANNING_GESTURE","enableOverDrag","DEFAULT_ENABLE_OVER_DRAG","enableFlashScrollableIndicatorOnExpand","DEFAULT_ENABLE_FLASH_SCROLLABLE_INDICATOR_ON_EXPAND","style","_providedStyle","keyboardBehavior","DEFAULT_KEYBOARD_BEHAVIOR","keyboardBlurBehavior","DEFAULT_KEYBOARD_BLUR_BEHAVIOR","handleHeight","_providedHandleHeight","containerHeight","_providedContainerHeight","topInset","overDragResistanceFactor","DEFAULT_OVER_DRAG_RESISTANCE_FACTOR","animatedPosition","_providedAnimatedPosition","animatedIndex","_providedAnimatedIndex","simultaneousHandlers","_providedSimultaneousHandlers","waitFor","_providedWaitFor","activeOffsetX","_providedActiveOffsetX","activeOffsetY","_providedActiveOffsetY","failOffsetX","_providedFailOffsetX","failOffsetY","_providedFailOffsetY","onChange","_providedOnChange","onAnimate","_providedOnAnimate","handleComponent","backdropComponent","backgroundComponent","children","setContainerHeight","setHandleHeight","safeHandleHeight","DEFAULT_HANDLE_HEIGHT","safeContainerHeight","WINDOW_HEIGHT","shouldMeasureContainerHeight","undefined","shouldMeasureHandleHeight","didSetHandleHeight","didSetContainerHeight","isLayoutCalculated","current","currentIndexRef","isClosing","didMountOnAnimate","scrollableContentOffsetY","setScrollableRef","removeScrollableRef","flashScrollableIndicators","isExtendedByKeyboard","animatedKeyboardOffset","state","keyboardState","height","keyboardHeight","keyboardAnimationDuration","keyboardAnimationEasing","shouldHandleKeyboardEvents","sheetHeight","length","initialPosition","refreshUIElements","currentPositionIndex","Math","max","handleOnChange","handleOnAnimate","toPoint","toIndex","findIndex","item","handleSettingScrollableRef","scrollableRef","animatedSheetHeight","KEYBOARD_BEHAVIOR","none","extend","fullScreen","value","interactive","safeFullScreenSheetHeight","sheetWithKeyboardHeight","KEYBOARD_STATE","SHOWN","animationState","ANIMATION_STATE","UNDETERMINED","animatedSnapPoints","adjustedSnapPoints","slice","reverse","adjustedSnapPointsIndexes","map","_","push","Extrapolate","CLAMP","animatedSheetState","extendedSheetPosition","extendedSheetWithKeyboardPosition","SHEET_STATE","CLOSED","EXTENDED","FULL_SCREEN","OVER_EXTENDED","OPENED","animatedCurrentIndex","animateToPointCompleted","STOPPED","animateToPoint","point","velocity","configs","RUNNING","duration","easing","scrollableState","SCROLLABLE_STATE","UNLOCKED","LOCKED","contentPanGestureHandler","contentPanGestureState","type","GESTURE","CONTENT","handlePanGestureHandler","handlePanGestureState","HANDLE","handleOnContainerMeasureHeight","handleOnHandleMeasureHeight","handleSnapTo","newSnapPoint","handleClose","handleExpand","handleCollapse","snapTo","expand","collapse","close","internalContextVariables","snapPointsCount","externalContextVariables","containerAnimatedStyle","opacity","transform","translateY","containerStyle","styles","container","contentContainerAnimatedStyle","contentContainerStyle","contentContainer","contentMaskContainerStyle","contentMaskContainer","paddingBottom","requestAnimationFrame","safeCurrentIndex","min","previousState","KEYBOARD_BLUR_BEHAVIOR","restore","HIDDEN","State","ACTIVE","_animatedIndex","_animatedPosition","_animationState","_contentGestureState","_handleGestureState","END","BottomSheet","displayName"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useMemo,\n  useRef,\n  useCallback,\n  forwardRef,\n  useImperativeHandle,\n  memo,\n  useLayoutEffect,\n  useEffect,\n} from 'react';\nimport { ViewStyle } from 'react-native';\nimport invariant from 'invariant';\nimport Animated, {\n  useAnimatedReaction,\n  useSharedValue,\n  useAnimatedStyle,\n  useDerivedValue,\n  runOnJS,\n  interpolate,\n  Extrapolate,\n  runOnUI,\n  cancelAnimation,\n  useWorkletCallback,\n} from 'react-native-reanimated';\nimport { State } from 'react-native-gesture-handler';\nimport {\n  useInteractivePanGestureHandler,\n  useScrollable,\n  usePropsValidator,\n  useNormalizedSnapPoints,\n  useReactiveSharedValue,\n  useKeyboard,\n} from '../../hooks';\nimport {\n  BottomSheetInternalProvider,\n  BottomSheetProvider,\n} from '../../contexts';\nimport BottomSheetContainer from '../bottomSheetContainer';\nimport BottomSheetBackdropContainer from '../bottomSheetBackdropContainer';\nimport BottomSheetHandleContainer from '../bottomSheetHandleContainer';\nimport BottomSheetBackgroundContainer from '../bottomSheetBackgroundContainer';\nimport BottomSheetDraggableView from '../bottomSheetDraggableView';\n// import BottomSheetDebugView from '../bottomSheetDebugView';\nimport {\n  GESTURE,\n  ANIMATION_STATE,\n  WINDOW_HEIGHT,\n  KEYBOARD_STATE,\n  KEYBOARD_BEHAVIOR,\n  SHEET_STATE,\n  SCROLLABLE_STATE,\n  KEYBOARD_BLUR_BEHAVIOR,\n} from '../../constants';\nimport { animate, getKeyboardAnimationConfigs } from '../../utilities';\nimport {\n  DEFAULT_ANIMATION_EASING,\n  DEFAULT_ANIMATION_DURATION,\n  DEFAULT_HANDLE_HEIGHT,\n  DEFAULT_OVER_DRAG_RESISTANCE_FACTOR,\n  DEFAULT_ENABLE_CONTENT_PANNING_GESTURE,\n  DEFAULT_ENABLE_HANDLE_PANNING_GESTURE,\n  DEFAULT_ENABLE_OVER_DRAG,\n  DEFAULT_ENABLE_FLASH_SCROLLABLE_INDICATOR_ON_EXPAND,\n  DEFAULT_ANIMATE_ON_MOUNT,\n  DEFAULT_KEYBOARD_BEHAVIOR,\n  DEFAULT_KEYBOARD_BLUR_BEHAVIOR,\n} from './constants';\nimport type { ScrollableRef, BottomSheetMethods } from '../../types';\nimport type { BottomSheetProps } from './types';\nimport { styles } from './styles';\n\nAnimated.addWhitelistedUIProps({\n  decelerationRate: true,\n});\n\ntype BottomSheet = BottomSheetMethods;\n\nconst BottomSheetComponent = forwardRef<BottomSheet, BottomSheetProps>(\n  (props, ref) => {\n    //#region validate props\n    usePropsValidator(props);\n    //#endregion\n\n    //#region extract props\n    const {\n      // animations configurations\n      animationDuration: _providedAnimationDuration = DEFAULT_ANIMATION_DURATION,\n      animationEasing: _providedAnimationEasing = DEFAULT_ANIMATION_EASING,\n      animationConfigs: _providedAnimationConfigs,\n\n      // configurations\n      index: _providedIndex = 0,\n      snapPoints: _providedSnapPoints,\n      animateOnMount = DEFAULT_ANIMATE_ON_MOUNT,\n      enableContentPanningGesture = DEFAULT_ENABLE_CONTENT_PANNING_GESTURE,\n      enableHandlePanningGesture = DEFAULT_ENABLE_HANDLE_PANNING_GESTURE,\n      enableOverDrag = DEFAULT_ENABLE_OVER_DRAG,\n      enableFlashScrollableIndicatorOnExpand = DEFAULT_ENABLE_FLASH_SCROLLABLE_INDICATOR_ON_EXPAND,\n      style: _providedStyle,\n\n      // keyboard\n      keyboardBehavior = DEFAULT_KEYBOARD_BEHAVIOR,\n      keyboardBlurBehavior = DEFAULT_KEYBOARD_BLUR_BEHAVIOR,\n\n      // layout\n      handleHeight: _providedHandleHeight,\n      containerHeight: _providedContainerHeight,\n      topInset = 0,\n      overDragResistanceFactor = DEFAULT_OVER_DRAG_RESISTANCE_FACTOR,\n\n      // animated callback shared values\n      animatedPosition: _providedAnimatedPosition,\n      animatedIndex: _providedAnimatedIndex,\n\n      // gestures\n      simultaneousHandlers: _providedSimultaneousHandlers,\n      waitFor: _providedWaitFor,\n      activeOffsetX: _providedActiveOffsetX,\n      activeOffsetY: _providedActiveOffsetY,\n      failOffsetX: _providedFailOffsetX,\n      failOffsetY: _providedFailOffsetY,\n\n      // callbacks\n      onChange: _providedOnChange,\n      onAnimate: _providedOnAnimate,\n      // components\n      handleComponent,\n      backdropComponent,\n      backgroundComponent,\n      children,\n    } = props;\n    //#endregion\n\n    //#region layout variables\n    // state\n    const [containerHeight, setContainerHeight] = useState(\n      _providedContainerHeight\n    );\n    const [handleHeight, setHandleHeight] = useState(_providedHandleHeight);\n\n    // safe layout values\n    const safeHandleHeight = useMemo(\n      () =>\n        handleComponent === null ? 0 : handleHeight || DEFAULT_HANDLE_HEIGHT,\n      [handleHeight, handleComponent]\n    );\n    const safeContainerHeight = useMemo(\n      () => _providedContainerHeight || containerHeight || WINDOW_HEIGHT,\n      [_providedContainerHeight, containerHeight]\n    );\n\n    // conditions\n    const shouldMeasureContainerHeight = useMemo(\n      () => _providedContainerHeight === undefined,\n      [_providedContainerHeight]\n    );\n    const shouldMeasureHandleHeight = useMemo(\n      () =>\n        _providedHandleHeight === undefined &&\n        handleComponent !== undefined &&\n        handleComponent !== null,\n      [_providedHandleHeight, handleComponent]\n    );\n\n    // refs\n    const didSetHandleHeight = useRef(!shouldMeasureHandleHeight);\n    const didSetContainerHeight = useRef(!shouldMeasureContainerHeight);\n\n    const isLayoutCalculated = useMemo(\n      () => {\n        return didSetHandleHeight.current && didSetContainerHeight.current;\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [containerHeight, handleHeight]\n    );\n    //#endregion\n\n    //#region variables\n    const currentIndexRef = useRef<number>(\n      animateOnMount ? -1 : _providedIndex\n    );\n    const isClosing = useRef(false);\n    const didMountOnAnimate = useRef(false);\n\n    // scrollable variables\n    const {\n      scrollableContentOffsetY,\n      setScrollableRef,\n      removeScrollableRef,\n      flashScrollableIndicators,\n    } = useScrollable();\n\n    // keyboard\n    const isExtendedByKeyboard = useSharedValue(false);\n    const animatedKeyboardOffset = useSharedValue(0);\n    const {\n      state: keyboardState,\n      height: keyboardHeight,\n      animationDuration: keyboardAnimationDuration,\n      animationEasing: keyboardAnimationEasing,\n      shouldHandleKeyboardEvents,\n    } = useKeyboard();\n\n    // normalize snap points\n    const snapPoints = useNormalizedSnapPoints(\n      _providedSnapPoints,\n      topInset,\n      safeContainerHeight,\n      safeHandleHeight\n    );\n    const sheetHeight = useMemo(\n      () =>\n        safeContainerHeight -\n        snapPoints[snapPoints.length - 1] -\n        safeHandleHeight,\n      [snapPoints, safeContainerHeight, safeHandleHeight]\n    );\n\n    const initialPosition = useMemo(() => {\n      return currentIndexRef.current < 0 || animateOnMount\n        ? safeContainerHeight - topInset\n        : snapPoints[currentIndexRef.current];\n    }, [snapPoints, animateOnMount, safeContainerHeight, topInset]);\n\n    //#endregion\n\n    //#region private methods\n    const refreshUIElements = useCallback(() => {\n      const currentPositionIndex = Math.max(currentIndexRef.current, 0);\n\n      if (\n        enableFlashScrollableIndicatorOnExpand &&\n        currentPositionIndex === snapPoints.length - 1\n      ) {\n        flashScrollableIndicators();\n      }\n    }, [\n      snapPoints,\n      flashScrollableIndicators,\n      enableFlashScrollableIndicatorOnExpand,\n    ]);\n    const handleOnChange = useCallback(\n      (index: number) => {\n        if (index === currentIndexRef.current) {\n          return;\n        }\n        currentIndexRef.current = index;\n\n        if (isClosing.current && (index === 0 || index === -1)) {\n          isClosing.current = false;\n        }\n\n        if (_providedOnChange) {\n          /**\n           * to avoid having -0 🤷‍♂️\n           */\n          _providedOnChange(index + 1 - 1);\n        }\n      },\n      [_providedOnChange]\n    );\n    const handleOnAnimate = useCallback(\n      (toPoint: number) => {\n        if (!_providedOnAnimate) {\n          return;\n        }\n        const toIndex = snapPoints.findIndex(item => item === toPoint);\n        if (toIndex !== currentIndexRef.current) {\n          _providedOnAnimate(currentIndexRef.current, toIndex);\n        }\n      },\n      [_providedOnAnimate, snapPoints]\n    );\n    const handleSettingScrollableRef = useCallback(\n      (scrollableRef: ScrollableRef) => {\n        setScrollableRef(scrollableRef);\n        refreshUIElements();\n      },\n      [setScrollableRef, refreshUIElements]\n    );\n    //#endregion\n\n    //#region gesture interaction / animation\n    // variables\n    const animatedSheetHeight = useDerivedValue(() => {\n      if (\n        keyboardBehavior === KEYBOARD_BEHAVIOR.none ||\n        keyboardBehavior === KEYBOARD_BEHAVIOR.extend\n      ) {\n        return sheetHeight;\n      }\n\n      if (keyboardBehavior === KEYBOARD_BEHAVIOR.fullScreen) {\n        return isExtendedByKeyboard.value\n          ? safeContainerHeight - topInset - safeHandleHeight\n          : sheetHeight;\n      }\n\n      if (\n        keyboardBehavior === KEYBOARD_BEHAVIOR.interactive &&\n        isExtendedByKeyboard.value\n      ) {\n        const safeFullScreenSheetHeight =\n          safeContainerHeight - topInset - safeHandleHeight;\n        const sheetWithKeyboardHeight = sheetHeight + keyboardHeight.value;\n\n        if (keyboardState.value === KEYBOARD_STATE.SHOWN) {\n          if (sheetHeight >= safeFullScreenSheetHeight) {\n            return safeFullScreenSheetHeight - keyboardHeight.value;\n          }\n          return sheetHeight;\n        }\n\n        if (sheetWithKeyboardHeight > safeFullScreenSheetHeight) {\n          return safeFullScreenSheetHeight;\n        }\n\n        return sheetWithKeyboardHeight;\n      }\n\n      return sheetHeight;\n    });\n    const animationState = useSharedValue(ANIMATION_STATE.UNDETERMINED);\n    const animatedSnapPoints = useReactiveSharedValue(snapPoints);\n    const animatedPosition = useSharedValue(initialPosition);\n    const animatedIndex = useDerivedValue(() => {\n      const adjustedSnapPoints = snapPoints.slice().reverse();\n      const adjustedSnapPointsIndexes = snapPoints\n        .slice()\n        .map((_, index) => index)\n        .reverse();\n\n      /**\n       * we add the close state index `-1`\n       */\n      adjustedSnapPoints.push(safeContainerHeight);\n      adjustedSnapPointsIndexes.push(-1);\n\n      return isLayoutCalculated\n        ? interpolate(\n            animatedPosition.value,\n            adjustedSnapPoints,\n            adjustedSnapPointsIndexes,\n            Extrapolate.CLAMP\n          )\n        : -1;\n    }, [snapPoints, safeContainerHeight, isLayoutCalculated]);\n    const animatedSheetState = useDerivedValue(() => {\n      const extendedSheetPosition =\n        safeContainerHeight - safeHandleHeight - sheetHeight;\n      const extendedSheetWithKeyboardPosition =\n        safeContainerHeight -\n        safeHandleHeight -\n        sheetHeight -\n        keyboardHeight.value;\n\n      if (animatedPosition.value >= safeContainerHeight) {\n        return SHEET_STATE.CLOSED;\n      } else if (\n        animatedPosition.value === extendedSheetPosition ||\n        (keyboardBehavior === KEYBOARD_BEHAVIOR.interactive &&\n          isExtendedByKeyboard.value &&\n          animatedPosition.value === extendedSheetWithKeyboardPosition)\n      ) {\n        return SHEET_STATE.EXTENDED;\n      } else if (animatedPosition.value === topInset) {\n        return SHEET_STATE.FULL_SCREEN;\n      } else if (animatedPosition.value < extendedSheetPosition) {\n        return SHEET_STATE.OVER_EXTENDED;\n      }\n\n      return SHEET_STATE.OPENED;\n    });\n    const animatedCurrentIndex = useSharedValue(currentIndexRef.current);\n\n    // callbacks\n    const animateToPointCompleted = useWorkletCallback(() => {\n      animationState.value = ANIMATION_STATE.STOPPED;\n    });\n    const animateToPoint = useWorkletCallback(\n      (\n        point: number,\n        velocity: number = 0,\n        configs?: Animated.WithTimingConfig | Animated.WithSpringConfig\n      ) => {\n        /**\n         * cancel current running animation\n         */\n        cancelAnimation(animatedPosition);\n\n        /**\n         * set animation state to running\n         */\n        animationState.value = ANIMATION_STATE.RUNNING;\n\n        /**\n         * fire `onAnimate` callback\n         */\n        runOnJS(handleOnAnimate)(point);\n\n        /**\n         * force animation configs from parameters, if provided\n         */\n        if (configs !== undefined) {\n          animatedPosition.value = animate(\n            point,\n            configs,\n            velocity,\n            animateToPointCompleted\n          );\n        } else if (_providedAnimationConfigs) {\n          /**\n           * use animationConfigs callback, if provided\n           */\n          animatedPosition.value = animate(\n            point,\n            _providedAnimationConfigs,\n            velocity,\n            animateToPointCompleted\n          );\n        } else {\n          animatedPosition.value = animate(\n            point,\n            {\n              duration: _providedAnimationDuration,\n              easing: _providedAnimationEasing,\n            },\n            0,\n            animateToPointCompleted\n          );\n        }\n      },\n      [\n        handleOnAnimate,\n        _providedAnimationConfigs,\n        _providedAnimationDuration,\n        _providedAnimationEasing,\n      ]\n    );\n\n    const scrollableState = useDerivedValue(() => {\n      return animatedSheetState.value === SHEET_STATE.FULL_SCREEN ||\n        animatedSheetState.value === SHEET_STATE.EXTENDED\n        ? SCROLLABLE_STATE.UNLOCKED\n        : SCROLLABLE_STATE.LOCKED;\n    });\n\n    // hooks\n    const [\n      contentPanGestureHandler,\n      contentPanGestureState,\n    ] = useInteractivePanGestureHandler({\n      type: GESTURE.CONTENT,\n      enableOverDrag,\n      overDragResistanceFactor,\n      keyboardState,\n      keyboardHeight,\n      keyboardBehavior: keyboardBehavior,\n      animatedPosition,\n      animatedSnapPoints,\n      isExtendedByKeyboard,\n      scrollableContentOffsetY,\n      animateToPoint,\n    });\n\n    const [\n      handlePanGestureHandler,\n      handlePanGestureState,\n    ] = useInteractivePanGestureHandler({\n      type: GESTURE.HANDLE,\n      enableOverDrag,\n      overDragResistanceFactor,\n      keyboardState,\n      keyboardHeight,\n      keyboardBehavior,\n      animatedPosition,\n      animatedSnapPoints,\n      isExtendedByKeyboard,\n      animateToPoint,\n    });\n    //#endregion\n\n    //#region layout callbacks\n    const handleOnContainerMeasureHeight = useCallback((height: number) => {\n      // console.log('BottomSheet', 'handleOnContainerMeasureHeight', height);\n      didSetContainerHeight.current = true;\n      setContainerHeight(height);\n    }, []);\n\n    const handleOnHandleMeasureHeight = useCallback((height: number) => {\n      // console.log('BottomSheet', 'handleOnHandleMeasureHeight', height);\n      didSetHandleHeight.current = true;\n      setHandleHeight(height);\n    }, []);\n    //#endregion\n\n    //#region public methods\n    const handleSnapTo = useCallback(\n      (\n        index: number,\n        animationDuration: number = DEFAULT_ANIMATION_DURATION,\n        animationEasing: Animated.EasingFunction = DEFAULT_ANIMATION_EASING\n      ) => {\n        invariant(\n          index >= -1 && index <= snapPoints.length - 1,\n          `'index' was provided but out of the provided snap points range! expected value to be between -1, ${\n            snapPoints.length - 1\n          }`\n        );\n\n        /**\n         * verify if sheet is closed.\n         */\n        if (animatedPosition.value === safeContainerHeight) {\n          isClosing.current = false;\n        }\n\n        /**\n         * exit method if sheet is closing.\n         */\n        if (isClosing.current) {\n          return;\n        }\n\n        const newSnapPoint = snapPoints[index];\n        runOnUI(animateToPoint)(newSnapPoint, 0, {\n          duration: animationDuration,\n          easing: animationEasing,\n        });\n      },\n      [animateToPoint, snapPoints, safeContainerHeight, animatedPosition]\n    );\n    const handleClose = useCallback(\n      (\n        animationDuration: number = DEFAULT_ANIMATION_DURATION,\n        animationEasing: Animated.EasingFunction = DEFAULT_ANIMATION_EASING\n      ) => {\n        /**\n         * verify if sheet is closed.\n         */\n        if (animatedPosition.value === safeContainerHeight) {\n          isClosing.current = false;\n        }\n\n        /**\n         * exit method if sheet is closing.\n         */\n        if (isClosing.current) {\n          return;\n        }\n\n        isClosing.current = true;\n        runOnUI(animateToPoint)(safeContainerHeight, 0, {\n          duration: animationDuration,\n          easing: animationEasing,\n        });\n      },\n      [animateToPoint, safeContainerHeight, animatedPosition]\n    );\n    const handleExpand = useCallback(\n      (\n        animationDuration: number = DEFAULT_ANIMATION_DURATION,\n        animationEasing: Animated.EasingFunction = DEFAULT_ANIMATION_EASING\n      ) => {\n        /**\n         * verify if sheet is closed.\n         */\n        if (animatedPosition.value === safeContainerHeight) {\n          isClosing.current = false;\n        }\n\n        /**\n         * exit method if sheet is closing.\n         */\n        if (isClosing.current) {\n          return;\n        }\n\n        const newSnapPoint = snapPoints[snapPoints.length - 1];\n        runOnUI(animateToPoint)(newSnapPoint, 0, {\n          duration: animationDuration,\n          easing: animationEasing,\n        });\n      },\n      [animateToPoint, snapPoints, safeContainerHeight, animatedPosition]\n    );\n    const handleCollapse = useCallback(\n      (\n        animationDuration: number = DEFAULT_ANIMATION_DURATION,\n        animationEasing: Animated.EasingFunction = DEFAULT_ANIMATION_EASING\n      ) => {\n        /**\n         * verify if sheet is closed.\n         */\n        if (animatedPosition.value === safeContainerHeight) {\n          isClosing.current = false;\n        }\n\n        /**\n         * exit method if sheet is closing.\n         */\n        if (isClosing.current) {\n          return;\n        }\n\n        const newSnapPoint = snapPoints[0];\n        runOnUI(animateToPoint)(newSnapPoint, 0, {\n          duration: animationDuration,\n          easing: animationEasing,\n        });\n      },\n      [animateToPoint, snapPoints, safeContainerHeight, animatedPosition]\n    );\n\n    useImperativeHandle(ref, () => ({\n      snapTo: handleSnapTo,\n      expand: handleExpand,\n      collapse: handleCollapse,\n      close: handleClose,\n    }));\n    //#endregion\n\n    //#region contexts variables\n    const internalContextVariables = useMemo(\n      () => ({\n        enableContentPanningGesture,\n        snapPointsCount: snapPoints.length,\n        animatedIndex,\n        animatedPosition,\n        animationState,\n        animatedSheetState,\n        contentPanGestureHandler,\n        scrollableState,\n        scrollableContentOffsetY,\n        shouldHandleKeyboardEvents,\n        simultaneousHandlers: _providedSimultaneousHandlers,\n        waitFor: _providedWaitFor,\n        activeOffsetX: _providedActiveOffsetX,\n        activeOffsetY: _providedActiveOffsetY,\n        failOffsetX: _providedFailOffsetX,\n        failOffsetY: _providedFailOffsetY,\n        setScrollableRef: handleSettingScrollableRef,\n        removeScrollableRef,\n      }),\n      [\n        snapPoints.length,\n        animatedIndex,\n        animatedPosition,\n        animationState,\n        animatedSheetState,\n        contentPanGestureHandler,\n        handleSettingScrollableRef,\n        removeScrollableRef,\n        shouldHandleKeyboardEvents,\n        scrollableState,\n        scrollableContentOffsetY,\n        enableContentPanningGesture,\n        _providedSimultaneousHandlers,\n        _providedWaitFor,\n        _providedActiveOffsetX,\n        _providedActiveOffsetY,\n        _providedFailOffsetX,\n        _providedFailOffsetY,\n      ]\n    );\n    const externalContextVariables = useMemo(\n      () => ({\n        snapTo: handleSnapTo,\n        expand: handleExpand,\n        collapse: handleCollapse,\n        close: handleClose,\n      }),\n      [handleSnapTo, handleExpand, handleCollapse, handleClose]\n    );\n    //#endregion\n\n    //#region styles\n    const containerAnimatedStyle = useAnimatedStyle(() => {\n      return {\n        opacity: isLayoutCalculated ? 1 : 0,\n        transform: [\n          {\n            translateY: isLayoutCalculated\n              ? Math.max(\n                  animatedPosition.value + animatedKeyboardOffset.value,\n                  topInset\n                )\n              : safeContainerHeight,\n          },\n        ],\n      };\n    }, [\n      safeContainerHeight,\n      isLayoutCalculated,\n      animatedKeyboardOffset,\n      topInset,\n    ]);\n    const containerStyle = useMemo(\n      () => [_providedStyle, styles.container, containerAnimatedStyle],\n      [_providedStyle, containerAnimatedStyle]\n    );\n    const contentContainerAnimatedStyle = useAnimatedStyle(\n      () => ({\n        height: animatedSheetHeight.value,\n      }),\n      []\n    );\n    const contentContainerStyle = useMemo(\n      () => [styles.contentContainer, contentContainerAnimatedStyle],\n      [contentContainerAnimatedStyle]\n    );\n\n    /**\n     * added safe area to prevent the sheet from floating above\n     * the bottom of the screen, when sheet being over dragged or\n     * when the sheet is resized.\n     */\n    const contentMaskContainerStyle = useMemo<ViewStyle>(\n      () => ({\n        ...styles.contentMaskContainer,\n        paddingBottom: sheetHeight,\n      }),\n      [sheetHeight]\n    );\n    //#endregion\n\n    //#region effects\n    /**\n     * This will animate the sheet to the initial snap point\n     * when component is mounted.\n     */\n    useLayoutEffect(() => {\n      if (\n        animateOnMount &&\n        isLayoutCalculated &&\n        didMountOnAnimate.current === false &&\n        isClosing.current === false &&\n        snapPoints[_providedIndex] !== safeContainerHeight &&\n        _providedIndex !== -1\n      ) {\n        const newSnapPoint = snapPoints[_providedIndex];\n        requestAnimationFrame(() => runOnUI(animateToPoint)(newSnapPoint));\n        didMountOnAnimate.current = true;\n      }\n    }, [\n      _providedIndex,\n      animateOnMount,\n      isLayoutCalculated,\n      snapPoints,\n      safeContainerHeight,\n      animateToPoint,\n    ]);\n\n    /*\n     * keep animated position synced with snap points.\n     */\n    useEffect(() => {\n      if (\n        isLayoutCalculated &&\n        currentIndexRef.current !== -1 &&\n        isClosing.current === false\n      ) {\n        /**\n         * Set index to new the snap points length, if previous index\n         * is out of bond.\n         */\n        const safeCurrentIndex = Math.min(\n          currentIndexRef.current,\n          snapPoints.length - 1\n        );\n\n        const newSnapPoint = snapPoints[safeCurrentIndex];\n        requestAnimationFrame(() => runOnUI(animateToPoint)(newSnapPoint));\n      }\n    }, [isLayoutCalculated, snapPoints, animateToPoint]);\n\n    /**\n     * handle keyboard appearance behavior\n     */\n    useAnimatedReaction(\n      () => keyboardState.value,\n      (state, previousState) => {\n        if (state === previousState) {\n          return;\n        }\n\n        let animationConfigs = getKeyboardAnimationConfigs(\n          keyboardAnimationEasing.value,\n          keyboardAnimationDuration.value\n        );\n\n        /**\n         * Handle restore sheet position on blur\n         */\n        if (\n          keyboardBlurBehavior === KEYBOARD_BLUR_BEHAVIOR.restore &&\n          state === KEYBOARD_STATE.HIDDEN &&\n          contentPanGestureState.value !== State.ACTIVE &&\n          handlePanGestureState.value !== State.ACTIVE\n        ) {\n          isExtendedByKeyboard.value = false;\n          const newSnapPoint = snapPoints[animatedCurrentIndex.value];\n          animateToPoint(newSnapPoint, 0, animationConfigs);\n        }\n\n        /**\n         * Handle extend behavior\n         */\n        if (\n          keyboardBehavior === KEYBOARD_BEHAVIOR.extend &&\n          state === KEYBOARD_STATE.SHOWN\n        ) {\n          const newSnapPoint = snapPoints[snapPoints.length - 1];\n          animateToPoint(newSnapPoint, 0, animationConfigs);\n          return;\n        }\n\n        /**\n         * Handle full screen behavior\n         */\n        if (\n          keyboardBehavior === KEYBOARD_BEHAVIOR.fullScreen &&\n          state === KEYBOARD_STATE.SHOWN\n        ) {\n          isExtendedByKeyboard.value = true;\n          animateToPoint(topInset, 0, animationConfigs);\n          return;\n        }\n\n        /**\n         * handle interactive behavior\n         */\n        if (\n          keyboardBehavior === KEYBOARD_BEHAVIOR.interactive &&\n          state === KEYBOARD_STATE.SHOWN\n        ) {\n          isExtendedByKeyboard.value = true;\n          const newSnapPoint = snapPoints[snapPoints.length - 1];\n          animateToPoint(\n            Math.max(topInset, newSnapPoint - keyboardHeight.value),\n            0,\n            animationConfigs\n          );\n        }\n      }\n    );\n\n    /**\n     * sets provided animated position\n     */\n    useAnimatedReaction(\n      () => animatedPosition.value,\n      value => {\n        if (_providedAnimatedPosition) {\n          _providedAnimatedPosition.value = value;\n        }\n      }\n    );\n\n    /**\n     * sets provided animated index\n     */\n    useAnimatedReaction(\n      () => animatedIndex.value,\n      value => {\n        if (_providedAnimatedIndex) {\n          _providedAnimatedIndex.value = value;\n        }\n      }\n    );\n\n    /**\n     * reaction to trigger `handleOnChange`\n     */\n    useAnimatedReaction(\n      () => ({\n        _animatedIndex: animatedIndex.value,\n        _animatedPosition: animatedPosition.value,\n        _animationState: animationState.value,\n        _contentGestureState: contentPanGestureState.value,\n        _handleGestureState: handlePanGestureState.value,\n      }),\n      ({\n        _animatedIndex,\n        _animationState,\n        _contentGestureState,\n        _handleGestureState,\n      }) => {\n        if (\n          _animatedIndex % 1 === 0 &&\n          _animationState === ANIMATION_STATE.STOPPED &&\n          (_contentGestureState === State.END ||\n            _contentGestureState === State.UNDETERMINED) &&\n          (_handleGestureState === State.END ||\n            _handleGestureState === State.UNDETERMINED)\n        ) {\n          animatedCurrentIndex.value = animatedIndex.value;\n          runOnJS(handleOnChange)(animatedIndex.value);\n          runOnJS(refreshUIElements)();\n        }\n      },\n      [handleOnChange]\n    );\n    //#endregion\n\n    // render\n    // console.log(\n    //   'BottomSheet',\n    //   'render',\n    //   snapPoints,\n    //   safeContainerHeight,\n    //   safeHandleHeight,\n    //   sheetHeight\n    // );\n    return (\n      <BottomSheetProvider value={externalContextVariables}>\n        <BottomSheetBackdropContainer\n          key=\"BottomSheetBackdropContainer\"\n          animatedIndex={animatedIndex}\n          animatedPosition={animatedPosition}\n          backdropComponent={backdropComponent}\n        />\n        <BottomSheetContainer\n          key=\"BottomSheetContainer\"\n          containerHeight={safeContainerHeight}\n          shouldMeasureHeight={shouldMeasureContainerHeight}\n          onMeasureHeight={handleOnContainerMeasureHeight}\n        >\n          <Animated.View\n            accessible={true}\n            accessibilityRole=\"adjustable\"\n            accessibilityLabel=\"Bottom Sheet\"\n            style={containerStyle}\n          >\n            <BottomSheetInternalProvider value={internalContextVariables}>\n              <BottomSheetBackgroundContainer\n                key=\"BottomSheetBackgroundContainer\"\n                animatedIndex={animatedIndex}\n                animatedPosition={animatedPosition}\n                backgroundComponent={backgroundComponent}\n              />\n              <Animated.View\n                pointerEvents=\"box-none\"\n                style={contentMaskContainerStyle}\n              >\n                {isLayoutCalculated && (\n                  <BottomSheetDraggableView\n                    key=\"BottomSheetRootDraggableView\"\n                    style={contentContainerStyle}\n                  >\n                    {typeof children === 'function'\n                      ? (children as Function)()\n                      : children}\n                  </BottomSheetDraggableView>\n                )}\n              </Animated.View>\n              <BottomSheetHandleContainer\n                key=\"BottomSheetHandleContainer\"\n                animatedIndex={animatedIndex}\n                animatedPosition={animatedPosition}\n                shouldMeasureHeight={shouldMeasureHandleHeight}\n                enableHandlePanningGesture={enableHandlePanningGesture}\n                handlePanGestureHandler={handlePanGestureHandler}\n                handleComponent={handleComponent}\n                snapPoints={snapPoints}\n                onMeasureHeight={handleOnHandleMeasureHeight}\n              />\n            </BottomSheetInternalProvider>\n          </Animated.View>\n          {/* <BottomSheetDebugView\n            values={{\n              animatedIndex,\n              animatedPosition,\n              keyboardState,\n              keyboardHeight,\n              animatedSheetHeight,\n              animatedSheetState,\n              scrollableContentOffsetY,\n              scrollableState,\n              isExtendedByKeyboard,\n            }}\n          /> */}\n        </BottomSheetContainer>\n      </BottomSheetProvider>\n    );\n  }\n);\n\nconst BottomSheet = memo(BottomSheetComponent);\nBottomSheet.displayName = 'BottomSheet';\n\nexport default BottomSheet;\n"]}