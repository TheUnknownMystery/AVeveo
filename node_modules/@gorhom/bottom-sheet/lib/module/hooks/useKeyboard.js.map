{"version":3,"sources":["useKeyboard.ts"],"names":["useEffect","Keyboard","Platform","runOnUI","useSharedValue","useWorkletCallback","KEYBOARD_STATE","KEYBOARD_EVENT_MAPPER","KEYBOARD_SHOW","select","ios","android","default","KEYBOARD_HIDE","useKeyboard","shouldHandleKeyboardEvents","keyboardState","UNDETERMINED","keyboardHeight","keyboardAnimationEasing","keyboardAnimationDuration","handleKeyboardEvent","state","height","duration","easing","SHOWN","value","handleOnKeyboardShow","event","endCoordinates","handleOnKeyboardHide","HIDDEN","addListener","removeListener","animationEasing","animationDuration"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\nimport {\n  Keyboard,\n  KeyboardEvent,\n  KeyboardEventEasing,\n  KeyboardEventName,\n  Platform,\n} from 'react-native';\nimport {\n  runOnUI,\n  useSharedValue,\n  useWorkletCallback,\n} from 'react-native-reanimated';\nimport { KEYBOARD_STATE } from '../constants';\n\nconst KEYBOARD_EVENT_MAPPER = {\n  KEYBOARD_SHOW: Platform.select({\n    ios: 'keyboardWillShow',\n    android: 'keyboardDidShow',\n    default: '',\n  }) as KeyboardEventName,\n  KEYBOARD_HIDE: Platform.select({\n    ios: 'keyboardWillHide',\n    android: 'keyboardDidHide',\n    default: '',\n  }) as KeyboardEventName,\n};\n\nexport const useKeyboard = () => {\n  //#region variables\n  const shouldHandleKeyboardEvents = useSharedValue(false);\n  const keyboardState = useSharedValue<KEYBOARD_STATE>(\n    KEYBOARD_STATE.UNDETERMINED\n  );\n  const keyboardHeight = useSharedValue(0);\n  const keyboardAnimationEasing = useSharedValue<KeyboardEventEasing>(\n    'keyboard'\n  );\n  const keyboardAnimationDuration = useSharedValue(500);\n  //#endregion\n\n  //#region worklets\n  const handleKeyboardEvent = useWorkletCallback(\n    (state, height, duration, easing) => {\n      if (state === KEYBOARD_STATE.SHOWN && !shouldHandleKeyboardEvents.value) {\n        return;\n      }\n      keyboardState.value = state;\n      keyboardHeight.value =\n        state === KEYBOARD_STATE.SHOWN\n          ? height\n          : height === 0\n          ? keyboardHeight.value\n          : height;\n      keyboardAnimationDuration.value = duration;\n      keyboardAnimationEasing.value = easing;\n    },\n    []\n  );\n  //#endregion\n\n  //#region effects\n  useEffect(() => {\n    const handleOnKeyboardShow = (event: KeyboardEvent) => {\n      runOnUI(handleKeyboardEvent)(\n        KEYBOARD_STATE.SHOWN,\n        event.endCoordinates.height,\n        event.duration,\n        event.easing\n      );\n    };\n    const handleOnKeyboardHide = (event: KeyboardEvent) => {\n      runOnUI(handleKeyboardEvent)(\n        KEYBOARD_STATE.HIDDEN,\n        event.endCoordinates.height,\n        event.duration,\n        event.easing\n      );\n    };\n\n    Keyboard.addListener(\n      KEYBOARD_EVENT_MAPPER.KEYBOARD_SHOW,\n      handleOnKeyboardShow\n    );\n\n    Keyboard.addListener(\n      KEYBOARD_EVENT_MAPPER.KEYBOARD_HIDE,\n      handleOnKeyboardHide\n    );\n\n    return () => {\n      Keyboard.removeListener(\n        KEYBOARD_EVENT_MAPPER.KEYBOARD_SHOW,\n        handleOnKeyboardShow\n      );\n\n      Keyboard.removeListener(\n        KEYBOARD_EVENT_MAPPER.KEYBOARD_HIDE,\n        handleOnKeyboardHide\n      );\n    };\n  }, [handleKeyboardEvent]);\n  //#endregion\n\n  return {\n    state: keyboardState,\n    height: keyboardHeight,\n    animationEasing: keyboardAnimationEasing,\n    animationDuration: keyboardAnimationDuration,\n    shouldHandleKeyboardEvents,\n  };\n};\n"]}